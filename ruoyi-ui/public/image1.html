
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="Generator" content="delete;" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="renderer" content="webkit">
	<meta name="searchtitle" content="">
	<meta name="title" content="">
	<meta name="description" content=""/>
	<meta name="keywords" content=""/>
	<title>钱包</title>
	<link href="css/style.css" rel="stylesheet" type="text/css"/>
	<link href="css/photo.css" rel="stylesheet" type="text/css"/>
	<script src="js/flexible.js" defer="defer"></script>
	<script src="js/html2canvas.js" defer="defer"></script>
	<script src="js/vue-2.4.2.min.js"></script>
  <script src="js/jquery-3.6.0.min.js"></script>
</head>
<body>
<style>

	@font-face {
		font-family: 'webfont';
		font-display: swap;
		src: url('//at.alicdn.com/t/webfont_ga2x9idx9ie.eot'); /* IE9*/
		src: url('//at.alicdn.com/t/webfont_ga2x9idx9ie.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
		url('//at.alicdn.com/t/webfont_ga2x9idx9ie.woff2') format('woff2'),
		url('//at.alicdn.com/t/webfont_ga2x9idx9ie.woff') format('woff'), /* chrome、firefox */
		url('//at.alicdn.com/t/webfont_ga2x9idx9ie.ttf') format('truetype'), /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/
		url('//at.alicdn.com/t/webfont_ga2x9idx9ie.svg#AlibabaPuHuiTiM') format('svg'); /* iOS 4.1- */
	}

	.main {width: 1284px ; height: 2778px; margin: 0 auto;}
	.phone {position: relative; width: 1284px ; height: 2778px;background: url("images/water_one.jpg") no-repeat top left;}
	.i-top {height: 140px;
		position: relative;}
	.i-header {height: 150px; position: relative;}
	.i-center {height: 545px;position: relative;}
	.i-main {height: 540px;}

	.i-top .top-time { position: absolute;
		width: 200px;
		top: 40px;
		left: 115px;
		font-size: 50px;
		font-weight: bold;
		font-family: "Microsoft YaHei, SimSun, Arial, Verdana, Helvetica, sans-serif";}
	.i-top .top-dian {float: right; width: 172px;height: 140px;}
	.i-top .top-dian.dian10 {background: url("images/dian_10.png") no-repeat top center;}
	.i-top .top-dian.dian9 {background: url("images/dian_9.png") no-repeat top center;}
	.i-top .top-dian.dian8 {background: url("images/dian_8.png") no-repeat top center;}
	.i-top .top-wang {float: right;width: 70px;height: 140px;}
	.i-top .top-wang.wangWIFI {background: url("images/wang_1.png") no-repeat top center;}
	.i-top .top-wang.wang5G {background: url("images/wang_2.png") no-repeat top center;}
	.i-top .top-xin {float: right;width: 78px;height: 140px;}
	.i-top .top-xin.xinhao4 {background: url("images/xinhao_4.png") no-repeat top center;}
	.i-top .top-xin.xinhao3 {background: url("images/xinhao_3.png") no-repeat top center;}
	.i-top .top-xin.xinhao2 {background: url("images/xinhao_2.png") no-repeat top center;}
	.i-top .top-xin.xinhao1 {background: url("images/xinhao_1.png") no-repeat top center;}
	.i-header .xinxi-num {position: absolute; right:165px; top:25px; width: 45px; height: 45px; background: #e15754; border-radius: 45px; line-height: 45px; text-align: center; font-size: 30px; font-weight: bold; color: #ffffff;}
	.i-center .dizhi {
		position: absolute;
		left: 63px;
		top: 77px;
		line-height: 34px;
		text-align: left;
		font-size: 32px;
		color: #969696;
		font-family: "Microsoft Sans Serif";
		font-weight: bold;
	}
	.i-center .money {
		position: absolute;
		left: 63px;
		top: 125px;
		line-height: 80px;
		text-align: left;
		font-size: 113px;
		color: #0e0e0e;
		font-family: "Microsoft Sans Serif";
		font-weight: bold;
	}

	.i-center .money span {display: inline-table}
	.i-main {padding-top: 140px;}
	.i-main .item-coin {height: 195px ; position: relative;font-family: "Microsoft Sans Serif"; font-weight: bold;}
	.i-main .item-coin .num1{
		position: absolute;
		right: 63px;
		top: 53px;
		font-size: 45px;
		color: #141414;
		}
	.i-main .item-coin .num2{position: absolute;
		position: absolute;
		left: 200px;
		top: 114px;
		font-size: 37px;
		color: #929292;
		font-weight: normal;
	}
	.i-main .item-coin .num3{
		position: absolute;
		right: 64px;
		top: 115px;
		font-size: 37px;
		color: #929292;
		font-weight: normal;
	}
	.i-bottom {height: 1300px; position: relative;}
	.i-bottom .xinxi-num {position: absolute; right:88px; bottom:119px; width: 24px; height: 24px; background: #e15754; border-radius: 24px; line-height: 24px; text-align: center; font-size: 1px; font-weight: bold; color: #e15754;}


</style>
<div id="app">
<div class="main">
	<div class="phone">
		<div class="i-top">
			<div class="top-time" id="modelTime">16:55</div>
			<div class="top-dian dian10" id="modelDian"></div>
			<div class="top-wang wangWIFI" id="modelWang"></div>
			<div class="top-xin xinhao4" id="modelXinhao"></div>
		</div>
		<div class="i-header">

		</div>
		<div class="i-center">
			<div class="dizhi" id="modelAddress">TFNaPZ...rYUDUt</div>
			<div class="money" id="modelSum">$3,106.18<span><img src="images/eye.png"></span></div>
		</div>
		<div class="i-main">
			<div class="item-coin">
				<div class="num1" id="modelTrxNum">200.00</div>
				<div class="num2" id="modelTrxPrice">$0.06593</div>
				<div class="num3" id="modelTrxSum">$13.18</div>
			</div>
			<div class="item-coin">
				<div class="num1" id="modelUsdtNum">3,093.00</div>
				<div class="num2" id="modelUsdtPrice">$1.00</div>
				<div class="num3" id="modelUsdtSum">$3,093.00</div>
			</div>
		</div>
		<div class="i-bottom">
					</div>
	</div>
</div>
<div id="img" style="width: 100%;">
	<p class="setcharity" id="setcharity"></p>

	<div class="generatePicture" data-html2canvas-ignore @click="generateImage" v-show="afterCanvasImageHide">
		<p class="optText" id="optText">生成图片</p>
	</div>

	<div class="shareImg" id="shareImg">
	</div>
	<div class="zz" id="zz"></div>
</div>
</div>
</body>

<script>
  var vm = new Vue({
		el: '#app',
		data: function () {
			return {
				afterCanvasImageHide: true,
				showToast: false,
				avatar: '',
        model1: {
          id: undefined,
          time: undefined,
          wang: "WIFI",
          dian: "100%",
          xinhao: "4格",
          address: undefined,
          noreadTansfer: 0,
          noreadSystem: 0,
          trxPrice: 0.06878,
          trxNum: 100,
          usdtPrice: 1,
          usdtNum: 1000
        }
			};
		},
    created() {
      this.getInfo();
    },
    mounted: function () {
			this.$nextTick(function () {
				var _this = this;
				var imgUrl1 ='';
				_this.img2base64(imgUrl1, 'Anonymous').then(function (res) {
					_this.avatar = res;
				});
			});
		},
		methods: {
      getInfo(){
        var afterUrl =  window.location.search.substring(1);//(问号以后的字符串)
        var id = afterUrl.substring(afterUrl.indexOf('=')+1);//(等号以后的字符串，及你所要的参数)
        $.getJSON(
          "/prod-api/api/tron/image/getInfo/"+id,{},
          function (response) {
            if (response.data){
              this.model1=response.data;

              let date = new Date(this.model1.time);
              let h = date.getHours();
              h = h < 10 ? "0" + h : h;
              let m = date.getMinutes();
              m = m < 10 ? "0" + m : m;

              $("#modelTime").html(h + ":" + m);
              if(this.model1.dian=="100%"){
                $("#modelDian").addClass("top-dian dian10");
              }
              if(this.model1.dian=="90%"){
                $("#modelDian").addClass("top-dian dian9");
              }
              if(this.model1.dian=="80%"){
                $("#modelDian").addClass("top-dian dian8");
              }
              $("#modelWang").addClass("top-wang wang"+this.model1.wang);
              $("#modelXinhao").addClass("top-xin xinhao"+this.model1.xinhao.substring(0,1));

              $("#modelAddress").html(this.model1.address.substr(0, 6) + '***' + this.model1.address.substr(28, 6));

              $("#modelTrxNum").html(this.model1.trxNum);
              $("#modelTrxPrice").html("$"+this.model1.trxPrice);
              $("#modelTrxSum").html("$"+(this.model1.trxNum*this.model1.trxPrice).toFixed(2));

              $("#modelUsdtNum").html(this.model1.usdtNum);
              $("#modelUsdtPrice").html("$"+this.model1.usdtPrice);
              $("#modelUsdtSum").html("$"+(this.model1.usdtNum*this.model1.usdtPrice).toFixed(2));

              $("#modelSum").html("$"+(this.model1.trxNum*this.model1.trxPrice+this.model1.usdtNum*this.model1.usdtPrice).toFixed(2));

            }
          }
        )
      },
			getDpr: function () {
				if (window.devicePixelRatio && window.devicePixelRatio > 1) {
					return window.devicePixelRatio;
				}
				return 1;
			},
			parseValue: function (value) {
				return parseInt(value, 10);
			},
			img2base64: function (url, crossOrigin) {
				return new Promise(resolve => {
					const img = new Image();
					img.onload = () => {
						const c = document.createElement('canvas');
						c.width = img.naturalWidth;
						c.height = img.naturalHeight;
						const cxt = c.getContext('2d');
						cxt.drawImage(img, 0, 0);
						resolve(c.toDataURL('image/png'));
					};
					crossOrigin && img.setAttribute('crossOrigin', crossOrigin);
					img.src = url;
				});
			},
			generateImage: function () {
				var _this = this;
				document.getElementById('setcharity').style.display = "block";
				document.getElementById('optText').innerText = "生成中...";
				document.getElementById('optText').style.backgroundColor = "#D0D0D0";
				document.getElementById('optText').style.disabled = true;
				var dom = document.querySelector('.main');
				var box = window.getComputedStyle(dom);
				var width = _this.parseValue(box.width);
				var height = _this.parseValue(box.height);
				var scaleBy = _this.getDpr();
				var canvas = document.createElement('canvas');
				canvas.width = width * scaleBy;
				canvas.height = height * scaleBy;
				canvas.style.width = width + 'px';
				canvas.style.height = height + 'px';
				var context = canvas.getContext('2d');
				context.scale(scaleBy, scaleBy);
				var w = document.getElementById('img').style.width;
				var h = document.getElementById('img').style.height;
				html2canvas(dom, {
					allowTaint: true,
					width: w,
					height: h,
					useCORS: true
				}).then(function (canvas) {
					var url = canvas.toDataURL('image/png');
					var image = new Image();
					image.src = url;
					document.getElementById('shareImg').appendChild(image);
					document.getElementById('setcharity').innerText = "长按保存图片至相册";
					document.getElementById('zz').style.display = "block";
					_this.afterCanvasImageHide = false;
					_this.showToast = true;
					setTimeout(function () {
						_this.showToast = false;
					}, 1000);
				});
			}
		}
	});
</script>
</html>
